<main>
  <h1><%= title %></h1>

  <% if (messages) { %>
    <% if (Array.isArray(messages) && messages.length > 0) { %>
      <div class="flash-message">
        <% messages.forEach(msg => { %>
          <p><%= msg %></p>
        <% }) %>
      </div>
    <% } else if (typeof messages === 'string') { %>
      <div class="flash-message">
        <p><%= messages %></p>
      </div>
    <% } %>
  <% } %>

  <form action="/account/register" method="post" class="register-form">
    <label for="firstName">First Name</label>
    <input type="text" id="firstName" name="firstName" value="<%= typeof firstName !== 'undefined' ? firstName : '' %>" required>

    <label for="lastName">Last Name</label>
    <input type="text" id="lastName" name="lastName" value="<%= typeof lastName !== 'undefined' ? lastName : '' %>" required>

    <label for="email">Email Address</label>
    <input type="email" id="email" name="email" value="<%= typeof email !== 'undefined' ? email : '' %>" required>

    <label for="password">Password</label>
    <input type="password" id="password" name="password" required>
    
    <!-- Optional toggle password button -->
    <button type="button" id="togglePassword">Show/Hide Password</button>

    <button type="submit">Register</button>
  </form>

  <p class="login-link">
    Already have an account?
    <a href="/account/login">Login here</a>
  </p>
</main>

<script>
  const toggleBtn = document.getElementById("togglePassword");
  const passwordInput = document.getElementById("password");

  toggleBtn.addEventListener("click", () => {
    if(passwordInput.type === "password"){
      passwordInput.type = "text";
    } else {
      passwordInput.type = "password";
    }
  });
</script>
